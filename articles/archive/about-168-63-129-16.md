---
title: IP アドレス 168.63.129.16 について
date: 2016-04-01 20:28:50
tags:
  - Archive
---
> [!WARNING]
> 本記事は、投稿より時間が経過しており、**一部内容が古い可能性があります。**

Azure サポートの宇田です。
今回は Azure 上でよく利用される 168.63.129.16 の IP アドレスについてご案内します。

Azure 上の仮想マシンなどでパケット キャプチャを行った際、168.63.129.16 という IP アドレスと通信しているログを見かけることがあります。こちらは Azure が各種サービスや機能を提供する際に使用している仮想パブリック IP アドレスで、Azure プラットフォームとご利用のインスタンス間の連携に使用されるものです。このため、Azure 上の仮想マシンなどではこの IP アドレスとの通信は必ず許可をいただけますようお願いいたします。

具体的にどのような用途で使われているかというと、以下のようなものがあります。

* Azure 基盤と仮想マシン内の VM エージェントの通信
* DNS サーバーを明示的に指定していない環境における、既定の DNS リゾルバー
* ロードバランサーからのプローブ
* PaaS インスタンスとのハートビート

この 168.63.129.16 の IP アドレスはすべてのリージョンで共通となり、今後も変更となる予定はありません。

Azure の Network Security Group の機能や、仮想マシン内の Firewall を用いてこの IP アドレスとの通信を制限された場合、各種機能が正常に起動しない場合があります。予期せぬトラブルのもととなる可能性がありますので、通信を遮断されないようご留意頂ければと思います。

[参考]
What is the IP address 168.63.129.16?
https://blogs.msdn.microsoft.com/mast/2015/05/18/what-is-the-ip-address-168-63-129-16/

**2016/10/31 追記:**
**DHCP や DNS といった仮想マシンが稼働するうえで最低限必要な通信については、NSG で通信を制限した場合でも予期せぬトラブルが発生しないよう、Azure 基盤側で明示的に通信を許可するよう機能改善が行われております。ただし、仮想マシンがロードバランサー配下に配置されている場合には、優先度の高いルールでロード バランサーからのプローブを許可するよう、お客様側で明示的に許可いただく必要がございます。**

**2019/03/13 追記:**
**168.63.129.16 を DNS のフォワーダーに設定してはいけないという制限が過去には存在していましたが、現在は一般的な用途であれば特に問題は発生しないように制限緩和されています。Linux OS を使用していて、DNS クライアントのキャッシュが有効化されていない場合に限り、スロットリングの影響を受ける恐れがありますので、以下ドキュメントを参考にキャッシュの有効化をご検討ください。**

DNS クライアントの構成
https://docs.microsoft.com/ja-jp/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances#dns-client-configuration

本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。
